(this["webpackJsonpdiscussion-thread"]=this["webpackJsonpdiscussion-thread"]||[]).push([[0],{1626:function(e,t,n){},1633:function(e,t,n){},1634:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(32),i=n.n(c),a=n(80),s=n(60),l=n.n(s);function u(e){if(e<=1)return!0;if(e<=3)return!0;if(e%2===0||e%3===0)return!1;for(var t=5;t*t<=e;){if(e%t===0||e%(t+2)===0)return!1;t+=6}return!0}n(1626);var d=n(15),f=n(12),j=n(1697),b=n(109),m=n.n(b),p=n(2),h=Object(j.a)({button:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",backgroundColor:"#F0F0F0",border:0,borderRadius:6,boxShadow:"none",color:"#0092DB",minHeight:48,marginTop:"3%",marginBottom:"5%",fontWeight:"bold",padding:"0 30px",fontSize:"1em",transition:"background 0.5s, color 0.5s, border 0.5s","&:hover":{backgroundColor:"#e6f2ff",color:"#0092DB"}},text:{marginLeft:"25%"},filtered:{backgroundColor:"#f9f9f9",backgroundImage:"radial-gradient(#e9fce9, #cdffcd)",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",border:0,borderRadius:6,boxShadow:"none",color:"#0092DB",minHeight:48,marginTop:"3%",marginBottom:"5%",fontWeight:"bold",padding:"0 30px",fontSize:"1em",transition:"background 0.5s, color 0.5s, border 0.5s","&:hover":{backgroundColor:"#e6f2ff",color:"#0092DB"}}}),x=function(e){var t=e.filterValidated,n=e.filter,r=h();return Object(p.jsx)("div",{children:Object(p.jsx)("div",{children:Object(p.jsxs)("button",{onClick:function(){return t()},className:n?r.filtered:r.button,children:[Object(p.jsx)(m.a,{}),Object(p.jsx)("p",{className:r.text,children:"Filter"})]})})})},g=n(112),O=n.n(g),v=n(113),C=n.n(v),k=n(114),y=n.n(k),N=Object(j.a)({text:{marginLeft:"8%",marginRight:"5%",marginBottom:"5%"},readOrHide:{color:"rgb(192,192,192)",cursor:"pointer"}}),w=function(e){var t=e.children,n=N(),o=t,c=Object(r.useState)(!0),i=Object(f.a)(c,2),a=i[0],s=i[1];return Object(p.jsx)("div",{children:Object(p.jsxs)("p",{className:n.text,children:[a?function(e){return e.slice(0,500)}(o):o,Object(p.jsx)("span",{onClick:function(){s(!a)},className:n.readOrHide,children:a?"...read more":"hide"})]})})},S=n(111),P=n.n(S),D=Object(j.a)({top:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"2rem"},img:{borderRadius:"50%",float:"left",maxHeight:"60px",marginTop:"10px"},time:{color:"#636363"},username:{marginLeft:"3%"},line:{border:"1px solid #eaeaea"},thumbup:{marginLeft:"90%"},icons:{display:"flex",justifyContent:"space-between",paddingBottom:"1rem"}}),F=function(e){var t=e.username,n=e.img,r=e.comment,o=e.postedOn,c=D();return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{src:n,alt:"profile-pic",className:c.img}),Object(p.jsxs)("div",{className:c.top,children:[Object(p.jsx)("h3",{className:c.username,children:t}),Object(p.jsx)("p",{className:c.time,children:P()(o,"YYYYMMDD").fromNow()})]})]}),Object(p.jsx)(w,{children:r}),Object(p.jsxs)("div",{className:c.icons,children:[Object(p.jsx)(O.a,{className:c.thumbup}),Object(p.jsx)(C.a,{}),Object(p.jsx)(y.a,{})]}),Object(p.jsx)("hr",{className:c.line})]})},B=n(79),I=n(1703),R=n(1702),T=n(115),M=n.n(T),z=n(1692),E=n(1691),H=n(1704),Y=n(1695),L=n(1699),_=n(1700),J=["Page 1","Page 2","Page 3","Page 4","Page 5"],U=Object(j.a)({container:{float:"right",position:"fixed",bottom:"66%",left:"85%"}}),q=function(e){var t=e.virtuoso,n=r.useState(!1),o=Object(f.a)(n,2),c=o[0],i=o[1],a=r.useRef(null),s=r.useState(0),l=Object(f.a)(s,2),u=l[0],d=l[1],j=U(),b=function(e){a.current&&a.current.contains(e.target)||i(!1)};return Object(p.jsxs)(r.Fragment,{children:[Object(p.jsxs)(R.a,{variant:"contained",ref:a,"aria-label":"split button",className:j.container,children:[Object(p.jsx)(I.a,{onClick:function(){return console.info("You clicked ".concat(J[u])),t.current.scrollToIndex({index:20*u,align:"start",behavior:"smooth"}),!1},children:J[u]}),Object(p.jsx)(I.a,{size:"large","aria-controls":c?"split-button-menu":void 0,"aria-expanded":c?"true":void 0,"aria-label":"select merge strategy","aria-haspopup":"menu",onClick:function(){i((function(e){return!e}))},children:Object(p.jsx)(M.a,{})})]}),Object(p.jsx)(Y.a,{open:c,anchorEl:a.current,role:void 0,transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,n=e.placement;return Object(p.jsx)(E.a,Object(B.a)(Object(B.a)({},t),{},{style:{transformOrigin:"bottom"===n?"center top":"center bottom"},children:Object(p.jsx)(H.a,{children:Object(p.jsx)(z.a,{onClickAway:b,children:Object(p.jsx)(_.a,{id:"split-button-menu",children:J.map((function(e,t){return Object(p.jsx)(L.a,{selected:t===u,onClick:function(e){return function(e,t){d(t),i(!1)}(0,t)},children:e},e)}))})})})}))}})]})},A=n(118),W=function(e){var t=e.posts,n=e.filter,o=e.focusClicked,c=Object(r.useRef)(null);return Object(p.jsxs)("div",{children:[Object(p.jsx)(A.a,{style:{height:o?"500px":"650px",width:"80%"},totalCount:100,ref:c,itemContent:function(e){return Object(p.jsx)("div",{children:n?t.filter((function(e){return e.validated})).map((function(e,t){return Object(p.jsx)(F,{username:e.userName,img:e.userProfileImgUrl,comment:e.comment,postedOn:e.postedOn},t)})):t.map((function(t){return Object(p.jsx)(F,{username:t.userName,img:t.userProfileImgUrl,comment:t.comment,postedOn:t.postedOn},e+1*Math.random())}))})}}),Object(p.jsx)(q,{virtuoso:c})]})},V=n(1696),G=n(1701),K=n(116),Q=n.n(K),X=Object(j.a)({container:{marginTop:"5%",marginLeft:"10%"},textfield:{boxShadow:"rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px;",bottom:"25px"}}),Z=function(e){var t=e.createPost,n=e.focusClicked,c=o.a.useState(""),i=Object(f.a)(c,2),a=i[0],s=i[1],l=new Date,u=Object(r.useRef)(),d=X(),j=function(e){e.preventDefault(),t({userName:"You",userProfileImgUrl:"https://cdn.fakercloud.com/avatars/arthurholcombe1_128.jpg",comment:a,validated:true,postedOn:l}),s("")};Object(r.useEffect)((function(){b(u)}),[n]);var b=function(e){e.current.focus()};return Object(p.jsx)("div",{className:d.container,children:Object(p.jsx)("form",{onSubmit:j,children:Object(p.jsx)(V.a,{className:d.textfield,id:"outlined-multiline-static",label:"Reply..",inputRef:u,value:a,multiline:!0,rows:8,size:"medium",sx:{width:"75%"},onSubmit:j,InputProps:{endAdornment:Object(p.jsx)(G.a,{size:"large",color:"primary",type:"submit",children:Object(p.jsx)(Q.a,{})})},onInput:function(e){return function(e){var t=e.target;s(t.value)}(e)}})})})};var $,ee,te=function(e){return function(e,t){return fetch(e,t).then((function(e){return e.status<=400?e:Promise.reject()})).then((function(e){return 204===e.status?e:e.json()})).catch((function(t){console.log("Error fetching ".concat(e),t)}))}("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},ne=n(117),re=n.n(ne),oe=Object(j.a)({root:{float:"right",position:"fixed",bottom:"76%",left:"85%"},icon:{marginRight:"0.7rem"},button:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-evenly",backgroundColor:"#e6f2ff",border:0,borderRadius:6,boxShadow:"none",color:"#0092DB",minHeight:48,marginTop:"5%",marginBottom:"5%",fontWeight:"bold",padding:"0 30px",fontSize:"1em",transition:"background 0.5s, color 0.5s, border 0.5s","&:hover":{backgroundColor:"#F0F0F0",color:"#0092DB"}}}),ce=function(e){var t=e.handleFocus,n=e.focusClicked,r=oe();return Object(p.jsx)("div",{className:r.root,children:Object(p.jsxs)("button",{className:r.button,style:{backgroundColor:n?"#FF7F7F":"#e6f2ff",color:n?"#FFF":"#0092DB"},onClick:function(){t()},children:[Object(p.jsx)(re.a,{className:r.icon}),n?"Close":"Comment"]})})},ie=(n(1633),function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(!1),i=Object(f.a)(c,2),a=i[0],s=i[1],l=Object(r.useState)(!1),u=Object(f.a)(l,2),j=u[0],b=u[1];Object(r.useEffect)((function(){m()}),[]);var m=function(){for(var e=1;e<6;e++)fetch("/api/posts?page=".concat(e)).then((function(e){return e.json()})).then((function(e){return o((function(t){return[].concat(Object(d.a)(t),Object(d.a)(e.posts))}))})).catch((function(e){return console.log("Error fetching posts",e)}))};return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)("h1",{children:"Comments"}),Object(p.jsx)(x,{filterValidated:function(){s(!a)},filter:a}),n.length>0?Object(p.jsx)(W,{posts:n,filter:a,focusClicked:j}):Object(p.jsx)("div",{}),j?Object(p.jsx)(Z,{createPost:function(e){te(e).then((function(e){o((function(t){return[].concat(Object(d.a)(t),[e.posts])}))}))},focusClicked:j}):Object(p.jsx)("div",{}),Object(p.jsx)(ce,{focusClicked:j,handleFocus:function(){return b(!j)}})]})});$=100,ee=20,Object(a.b)({models:{posts:a.a},seeds:function(e){for(var t=0;t<$;t++)e.create("post",{userName:l.a.name.firstName(),userProfileImgUrl:l.a.image.avatar(),comment:l.a.lorem.paragraphs(Math.floor(6*Math.random())+2),validated:u(t),postedOn:new Date})},routes:function(){this.get("/api/posts",(function(e,t){var n=parseInt(t.queryParams.page,10)||1,r=t.queryParams.filter||"";return function(e,t,n,r){"validated"===t&&(e=e.filter((function(e){return!0===e.validated})));var o=n||1,c=r||10,i=(o-1)*c,a=e.slice(i).slice(0,r),s=Math.ceil(e.length/c);return{page:o,per_page:c,prev_page:o-1?o-1:null,next_page:s>o?o+1:null,total:e.length,total_pages:s,posts:a}}(e.db.posts,r,n,ee)})),this.post("/api/posts",(function(e,t){var n=JSON.parse(t.requestBody);return n.postedOn=new Date,e.posts.create(n)}))}}),i.a.render(Object(p.jsx)(o.a.StrictMode,{children:Object(p.jsx)(ie,{})}),document.getElementById("root"))}},[[1634,1,2]]]);
//# sourceMappingURL=main.df6293ce.chunk.js.map